<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>I Wrote Today</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Georgia', serif;
            background-color: #F5F5F0;
            color: #3D3D3D;
            line-height: 1.6;
            display: flex;
            flex-direction: column;
            min-height: 100vh;
            padding: 20px;
            transition: opacity 0.5s ease;
        }

        .welcome-screen {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            min-height: 80vh;
            width: 100%;
        }

        .checkin-btn {
            background: #2D4D32;
            color: #F0F4F0;
            border: none;
            border-radius: 8px;
            font-family: 'Georgia', serif;
            font-size: 1.8rem;
            padding: 1.8rem 4rem;
            text-transform: lowercase;
            letter-spacing: 0.5px;
            cursor: pointer;
            transition: all 0.15s ease;
            margin-bottom: 1.5rem;
            font-weight: normal;
        }

        .checkin-btn:hover {
            background: #26422A;
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
        }

        .tomorrow-link {
            color: #223D27;
            font-style: italic;
            font-size: 0.9rem;
            text-decoration: none;
            border-bottom: 1px dashed #223D27;
            padding-bottom: 2px;
            cursor: pointer;
            transition: all 0.15s ease;
        }

        .tomorrow-link:hover {
            border-bottom-style: solid;
            color: #1A321F;
        }

        .results-screen {
            display: none;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            min-height: 80vh;
            width: 100%;
            text-align: center;
            position: relative;
        }

        .word-screen {
            display: none;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            min-height: 80vh;
            width: 100%;
            text-align: center;
            position: relative;
        }

        .celebration {
            font-size: 4rem;
            color: #2D4D32;
            margin-bottom: 2rem;
            min-height: 6rem;
            display: flex;
            align-items: center;
            justify-content: center;
            opacity: 0;
            animation: fadeIn 0.8s forwards;
            z-index: 10;
        }

        .quote-container {
            max-width: 600px;
            opacity: 0;
            transform: translateY(20px);
            animation: fadeInUp 1s forwards;
            animation-delay: 1s;
            margin-top: 2rem;
            margin-bottom: 3rem;
        }

        .quote-text {
            font-style: italic;
            font-size: 1.8rem;
            line-height: 1.4;
            margin-bottom: 1rem;
            color: #2D4D32;
        }

        .quote-attribution {
            font-size: 1.2rem;
            color: #5A5A5A;
            margin-bottom: 1.5rem;
        }

        .book-link {
            color: #2D4D32;
            text-decoration: none;
            border-bottom: 1px solid #2D4D32;
            font-size: 1rem;
            transition: all 0.2s;
            padding: 0.5rem 1rem;
            border-radius: 4px;
            background-color: rgba(45, 77, 50, 0.1);
        }

        .book-link:hover {
            background-color: #2D4D32;
            color: #F5F5F0;
        }

        .back-button {
            position: absolute;
            top: 20px;
            left: 20px;
            background: none;
            border: none;
            color: #2D4D32;
            font-family: 'Georgia', serif;
            font-size: 1rem;
            cursor: pointer;
            padding: 0.5rem 1rem;
            border-radius: 4px;
            transition: all 0.2s;
            display: flex;
            align-items: center;
        }

        .back-button:hover {
            background-color: rgba(45, 77, 50, 0.1);
        }

        .back-button svg {
            margin-right: 0.5rem;
        }

        .quills-container {
            display: flex;
            justify-content: center;
            flex-wrap: wrap;
            gap: 15px;
            margin-top: 2rem;
            opacity: 0;
            animation: fadeIn 1s forwards;
            animation-delay: 2s;
        }

        .quill {
            width: 24px;
            height: 40px;
            transition: transform 0.3s ease;
        }

        .quill.lying {
            transform: rotate(-90deg) translateY(10px);
            opacity: 0.7;
        }

        .milestone-message {
            position: fixed;
            top: 20px;
            left: 0;
            right: 0;
            color: #2D4D32;
            font-size: 1.5rem;
            text-align: center;
            animation: fadeInOut 3s ease;
            z-index: 20;
        }

        /* Word screen styles */
        .treasure-message {
            font-size: 2.5rem;
            color: #2D4D32;
            margin-bottom: 3rem;
            animation: fadeIn 1.5s forwards;
        }

        .word-container {
            max-width: 600px;
            opacity: 0;
            animation: fadeInUp 1.5s forwards;
            animation-delay: 1.5s;
        }

        .word-display {
            font-size: 3rem;
            font-weight: bold;
            color: #2D4D32;
            margin-bottom: 1rem;
        }

        .word-definition {
            font-size: 1.5rem;
            line-height: 1.4;
            margin-bottom: 1.5rem;
            color: #5A5A5A;
        }

        .word-source {
            font-size: 1rem;
            font-style: italic;
            color: #888;
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        @keyframes fadeInUp {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        @keyframes fadeInOut {
            0%, 100% { opacity: 0; transform: translateY(-20px); }
            20%, 80% { opacity: 1; transform: translateY(0); }
        }

        footer {
            text-align: center;
            margin-top: 3rem;
            color: #5A5A5A;
            font-size: 0.9rem;
        }

        /* Responsive design */
        @media (max-width: 768px) {
            .checkin-btn {
                font-size: 1.5rem;
                padding: 1.5rem 3rem;
            }
            
            .quote-text {
                font-size: 1.5rem;
            }
            
            .celebration {
                font-size: 3rem;
            }
            
            .quills-container {
                gap: 10px;
            }
            
            .quill {
                width: 20px;
                height: 35px;
            }
            
            .treasure-message {
                font-size: 2rem;
            }
            
            .word-display {
                font-size: 2.5rem;
            }
            
            .word-definition {
                font-size: 1.2rem;
            }
        }
    </style>
</head>
<body>
    <div class="welcome-screen" id="welcome-screen">
        <button class="checkin-btn" id="checkin-button">i wrote today</button>
        <a class="tomorrow-link" id="tomorrow-link">i didn't, but i will tomorrow!</a>
    </div>

    <div class="results-screen" id="results-screen">
        <button class="back-button" id="back-button">
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M19 12H5M5 12L12 19M5 12L12 5" stroke="#2D4D32" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
            </svg>
            Back
        </button>
        
        <div class="celebration" id="celebration"></div>
        
        <div class="quote-container" id="quote-container">
            <div class="quote-text" id="quote-text"></div>
            <div class="quote-attribution" id="quote-attribution"></div>
            <a class="book-link" id="book-link" target="_blank">Find this book at Bookshop.org</a>
        </div>
        
        <div class="quills-container" id="quills-container"></div>
    </div>

    <div class="word-screen" id="word-screen">
        <button class="back-button" id="word-back-button">
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M19 12H5M5 12L12 19M5 12L12 5" stroke="#2D4D32" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
            </svg>
            Back
        </button>
        
        <div class="treasure-message" id="treasure-message">a treasure for your word hoard...</div>
        
        <div class="word-container" id="word-container">
            <div class="word-display" id="word-display"></div>
            <div class="word-definition" id="word-definition"></div>
            <div class="word-source" id="word-source"></div>
        </div>
    </div>

    <footer>
        <p>Celebrate your writing journey, one day at a time</p>
    </footer>

    <script>
        // User data
        let userStreak = 0;
        let lastCheckIn = null;
        let wroteToday = true;
        
        // Celebration phrases
        const celebrations = [
            "¡Magnífico!", "Fantastique!", "Perfetto!", "Отлично!", "太棒了!", 
            "Wunderbar!", "Świetnie!", "ممتاز!", "เยี่ยมมาก!", "Génial!",
            "Words well spent!", "Sentence magic!", "Another page conquered!",
            "The muse approves!", "Well written!"
        ];

        // Novel quotes database
        const novelQuotes = [
            {
                text: "It was a bright cold day in April, and the clocks were striking thirteen.",
                author: "George Orwell",
                book: "1984",
                year: 1949,
                gender: "male",
                links: {
                    amazon: "https://www.amazon.com/dp/0451524934/",
                    bookshop: "https://bookshop.org/a/123/9780451524935"
                }
            },
            {
                text: "I am writing this under an appreciable mental strain.",
                author: "H.P. Lovecraft",
                book: "The Call of Cthulhu",
                year: 1928,
                gender: "male",
                links: {
                    amazon: "https://www.amazon.com/dp/1503262070/",
                    bookshop: "https://bookshop.org/a/123/9781503262077"
                }
            },
            {
                text: "The snow in the mountains was melting and Bunny had been dead for several weeks.",
                author: "Donna Tartt",
                book: "The Secret History",
                year: 1992,
                gender: "female",
                links: {
                    amazon: "https://www.amazon.com/dp/1400031702/",
                    bookshop: "https://bookshop.org/a/123/9781400031702"
                }
            },
            {
                text: "It is a truth universally acknowledged, that a single man in possession of a good fortune, must be in want of a wife.",
                author: "Jane Austen",
                book: "Pride and Prejudice",
                year: 1813,
                gender: "female",
                links: {
                    amazon: "https://www.amazon.com/dp/0141439513/",
                    bookshop: "https://bookshop.org/a/123/9780141439518"
                }
            },
            {
                text: "Happy families are all alike; every unhappy family is unhappy in its own way.",
                author: "Leo Tolstoy",
                book: "Anna Karenina",
                year: 1877,
                gender: "male",
                links: {
                    amazon: "https://www.amazon.com/dp/0143035002/",
                    bookshop: "https://bookshop.org/a/123/9780143035008"
                }
            }
        ];

        // Word database
        const unusualWords = [
            {
                word: "Petrichor",
                definition: "A pleasant, earthy smell that accompanies the first rain after a dry period.",
                source: "Oxford English Dictionary"
            },
            {
                word: "Catawampus",
                definition: "An imaginary fierce wild animal .",
                source: "Merriam-Webster Dictionary"
            },
            {
                word: "Ephemeral",
                definition: "Lasting for a very short time.",
                source: "Oxford English Dictionary"
            },
            {
                word: "Sonder",
                definition: "The realization that each random passerby is living a life as vivid and complex as your own.",
                source: "Oxford English Dictionary"
            },
            {
                word: "Defenestration",
                definition: "A throwing of a person or thing out of a window.",
                source: "Merriam-Webster Dictionary"
            },
            {
                word: "Octothorpe",
                definition: "The symbol #.",
                source: "Merriam-Webster Dictionary"
            },
            {
                word: "Biblioklept",
                definition: "One who steals books.",
                source: "Merriam-Webster Dictionary"
            },
            {
                word: "Ineffable",
                definition: "Too great or extreme to be expressed or described in words.",
                source: "Oxford English Dictionary"
            },
            {
                word: "Pot-valor",
                definition: "Boldness or courage resulting from alcoholic drink.",
                source: "Merriam-Webster Dictionary"
            },
            {
                word: "Resplendent",
                definition: "Attractive and impressive through being richly colorful or sumptuous.",
                source: "Oxford English Dictionary"
            },
            {
                word: "Dibble",
                definition: "A small hand implement used to make holes in the ground for plants, seeds, or bulbs.",
                source: "Merriam-Webster Dictionary"
            },
            {
                word: "Quintessential",
                definition: "Representing the most perfect or typical example of a quality or class.",
                source: "Oxford English Dictionary"
            },
            {
                word: "Spile",
                definition: "A spout inserted in a tree to draw off sap.",
                source: "Merriam-Webster Dictionary"
            },
            {
                word: "Nebulous",
                definition: "In the form of a cloud or haze; hazy.",
                source: "Oxford English Dictionary"
            },
            {
                word: "Halcyon",
                definition: "Denoting a period of time in the past that was idyllically happy and peaceful.",
                source: "Oxford English Dictionary"
            },
            {
                word: "Evanescent",
                definition: "Soon passing out of sight, memory, or existence; quickly fading or disappearing.",
                source: "Oxford English Dictionary"
            },
            {
                word: "Surreptitious",
                definition: "Kept secret, especially because it would not be approved of.",
                source: "Oxford English Dictionary"
            },
            {
                word: "Incandescent",
                definition: "Emitting light as a result of being heated.",
                source: "Oxford English Dictionary"
            },
            {
                word: "Mellifluous",
                definition: "Sweet or musical; pleasant to hear.",
                source: "Oxford English Dictionary"
            },
            {
                word: "Marcescence",
                definition: "The quality or state (as of leaves or other plant parts) of withering without falling off.",
                source: "Merriam-Webster Dictionary"
            },
            {
                word: "Vicarious",
                definition: "Experienced in the imagination through the feelings or actions of another person.",
                source: "Oxford English Dictionary"
            },
            {
                word: "Penumbra",
                definition: "The partially shaded outer region of the shadow cast by an opaque object.",
                source: "Oxford English Dictionary"
            },
            {
                word: "Epiphany",
                definition: "A moment of sudden and great revelation or realization.",
                source: "Oxford English Dictionary"
            },
            {
                word: "Borborygmus",
                definition: "intestinal rumbling caused by moving gas.",
                source: "Merriam-Webster Dictionary"
            },
            {
                word: "Aureate",
                definition: "Denoting, made of, or having the color of gold.",
                source: "Oxford English Dictionary"
            },
            {
                word: "Sonorous",
                definition: "Capable of producing a deep or ringing sound.",
                source: "Oxford English Dictionary"
            },
            {
                word: "Vellichor",
                definition: "The strange wistfulness of used bookstores.",
                source: "Cambridge English Dictionary"
            },
            {
                word: "Sibilance",
                definition: "A hissing sound; the quality of being sibilant.",
                source: "Cambridge English Dictionary"
            },
            {
                word: "Chatoyant",
                definition: "Having a changeable luster or color with an undulating narrow band of white light.",
                source: "Cambridge English Dictionary"
            },
            {
                word: "Apricity",
                definition: "The warmth of the sun in winter.",
                source: "Cambridge English Dictionary"
            }
            {
                word: "Sillage",
                definition: "The scent that lingers in the air, the trail left in water, the impression made in space after someone or something has been and gone.",
                source: "French borrowing"
            },
            {
                word: "Ethereal",
                definition: "Extremely delicate and light in a way that seems too perfect for this world.",
                source: "Oxford English Dictionary"
            },
            {
                word: "Nepenthe",
                definition: "A potion used by the ancients to induce forgetfulness of pain or sorrow.",
                source: "Merriam-Webster Dictionary"
            },
            {
                word: "Susurrus",
                definition: "A soft, low noise like someone whispering.",
                source: "Cambridge Dictionary"
            },
            {
                word: "Mellifluous",
                definition: "A sound that is sweet and smooth, pleasing to hear.",
                source: "Oxford English Dictionary"
            },
            {
                word: "Penumbra",
                definition: "The partially shaded outer region of the shadow cast by an opaque object.",
                source: "Oxford English Dictionary"
            },
            {
                word: "Absquatulate",
                definition: "To leave suddenly (mainly humorous).",
                source: "Cambridge English Dictionary"
            },

        ];

        // Milestones that trigger effects
        const MILESTONES = [3, 7, 14, 30, 60, 180];

        // DOM elements
        const welcomeScreen = document.getElementById('welcome-screen');
        const resultsScreen = document.getElementById('results-screen');
        const wordScreen = document.getElementById('word-screen');
        const checkinButton = document.getElementById('checkin-button');
        const tomorrowLink = document.getElementById('tomorrow-link');
        const backButton = document.getElementById('back-button');
        const wordBackButton = document.getElementById('word-back-button');
        const celebrationElement = document.getElementById('celebration');
        const quoteContainer = document.getElementById('quote-container');
        const quoteText = document.getElementById('quote-text');
        const quoteAttribution = document.getElementById('quote-attribution');
        const bookLink = document.getElementById('book-link');
        const quillsContainer = document.getElementById('quills-container');
        const treasureMessage = document.getElementById('treasure-message');
        const wordContainer = document.getElementById('word-container');
        const wordDisplay = document.getElementById('word-display');
        const wordDefinition = document.getElementById('word-definition');
        const wordSource = document.getElementById('word-source');

        // Initialize the app
        function initApp() {
            // Load user streak
            if (localStorage.getItem('userStreak')) {
                userStreak = parseInt(localStorage.getItem('userStreak'));
            }
            
            // Always show welcome screen first
            welcomeScreen.style.display = 'flex';
            resultsScreen.style.display = 'none';
            wordScreen.style.display = 'none';
        }

        // Handle check-in
        checkinButton.addEventListener('click', function() {
            const today = new Date();
            const todayString = today.toDateString();
            
            // Check if already checked in today
            if (localStorage.getItem('lastCheckIn') === todayString) {
                // User already checked in today - show results without updating streak
                welcomeScreen.style.display = 'none';
                resultsScreen.style.display = 'flex';
                wroteToday = true;
                showCelebration();
                setTimeout(showQuote, 1000);
                setTimeout(showQuills, 2000);
                return;
            }
            
            // Check if streak continues (wrote yesterday)
            const yesterday = new Date();
            yesterday.setDate(yesterday.getDate() - 1);
            const yesterdayString = yesterday.toDateString();
            
            if (localStorage.getItem('lastCheckIn') !== yesterdayString) {
                // Streak broken
                userStreak = 1;
            } else {
                // Continue streak
                userStreak++;
            }
            
            // Save check-in and streak
            localStorage.setItem('lastCheckIn', todayString);
            localStorage.setItem('userStreak', userStreak);
            wroteToday = true;
            
            // Switch to results screen
            welcomeScreen.style.display = 'none';
            resultsScreen.style.display = 'flex';
            
            // Show celebration and then quote
            showCelebration();
            setTimeout(showQuote, 1000);
            setTimeout(showQuills, 2000);
            
            // Check for milestone
            if (MILESTONES.includes(userStreak)) {
                setTimeout(() => {
                    showMilestoneMessage();
                }, 1000);
            }
        });

        // Handle "I'll write tomorrow" link
        tomorrowLink.addEventListener('click', function() {
            // Switch to word screen
            welcomeScreen.style.display = 'none';
            wordScreen.style.display = 'flex';
            
            // Show the treasure message and then the word
            setTimeout(showWord, 2000);
        });

        // Handle back button from results screen
        backButton.addEventListener('click', function() {
            resultsScreen.style.display = 'none';
            welcomeScreen.style.display = 'flex';
            
            // Reset celebration and quote for next time
            celebrationElement.style.animation = 'none';
            quoteContainer.style.animation = 'none';
            setTimeout(() => {
                celebrationElement.style.animation = '';
                quoteContainer.style.animation = '';
            }, 10);
            
            // Clear quills
            quillsContainer.innerHTML = '';
        });

        // Handle back button from word screen
        wordBackButton.addEventListener('click', function() {
            wordScreen.style.display = 'none';
            welcomeScreen.style.display = 'flex';
            
            // Reset word screen for next time
            treasureMessage.style.animation = 'none';
            wordContainer.style.animation = 'none';
            setTimeout(() => {
                treasureMessage.style.animation = '';
                wordContainer.style.animation = '';
            }, 10);
        });

        // Show celebration message
        function showCelebration() {
            const today = new Date();
            const dayOfYear = Math.floor((today - new Date(today.getFullYear(), 0, 0)) / (1000 * 60 * 60 * 24));
            celebrationElement.textContent = celebrations[dayOfYear % celebrations.length];
        }

        // Show quote
        function showQuote() {
            const today = new Date();
            const dayOfYear = Math.floor((today - new Date(today.getFullYear(), 0, 0)) / (1000 * 60 * 60 * 24));
            const quoteData = novelQuotes[dayOfYear % novelQuotes.length];
            
            quoteText.textContent = `"${quoteData.text}"`;
            quoteAttribution.textContent = `${quoteData.book}, ${quoteData.author}`;
            
            // Set book link to Bookshop.org
            bookLink.href = quoteData.links.bookshop;
        }

        // Show word and definition
        function showWord() {
            const today = new Date();
            const dayOfYear = Math.floor((today - new Date(today.getFullYear(), 0, 0)) / (1000 * 60 * 60 * 24));
            const wordData = unusualWords[dayOfYear % unusualWords.length];
            
            // Fade out the treasure message
            treasureMessage.style.animation = 'fadeInOut 1.5s forwards';
            
            // Show the word and definition
            setTimeout(() => {
                wordDisplay.textContent = wordData.word;
                wordDefinition.textContent = wordData.definition;
                wordSource.textContent = `Source: ${wordData.source}`;
            }, 1500);
        }

        // Show quills based on streak
        function showQuills() {
            quillsContainer.innerHTML = '';
            
            for (let i = 0; i < userStreak; i++) {
                const quill = document.createElement('div');
                quill.className = 'quill';
                
                // If this is the current day and user didn't write, show lying quill
                if (i === userStreak - 1 && !wroteToday) {
                    quill.classList.add('lying');
                }
                
                // Quill SVG
                quill.innerHTML = `
                    <svg width="100%" height="100%" viewBox="0 0 24 40" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M2 38C6 34 8 28 12 22C16 16 18 12 12 6C6 0 8 6 12 12C16 18 20 24 16 30C12 36 10 38 2 38Z" fill="#2D4D32"/>
                        <path d="M12 6C12 2 16 0 20 2C24 4 22 8 18 10C14 12 12 10 12 6Z" fill="#8B4513"/>
                        <path d="M2 38L4 36" stroke="#5A5A5A" stroke-width="1.5"/>
                    </svg>
                `;
                
                quillsContainer.appendChild(quill);
            }
        }

        // Show milestone message
        function showMilestoneMessage() {
            const messages = {
                3: "First milestone!",
                7: "Weekly streak!",
                14: "Two weeks strong!",
                30: "Month of writing!",
                60: "Two months!",
                180: "Half a year!"
            };
            
            const msg = document.createElement('div');
            msg.className = 'milestone-message';
            msg.textContent = messages[userStreak];
            
            document.body.appendChild(msg);
            
            setTimeout(() => {
                msg.remove();
            }, 3000);
        }

        // Initialize the app
        initApp();
    </script>
</body>
</html>
